/*! elasto.js - v0.1.0 - 2016-01-05 - [object Object] */
(function(){function e(e){"use strict";var t={hideIncompleteRow:!1,trackActive:!0,trackAnimation:!0,minSize:150,move:null,select:null,click:null,enter:null,keyEventsEnabled:!0,customAttributes:{},displayProperties:{image:"image",title:"title",description:"description"}},n=e.Elasto=function(e,i,r){var o,l,s,a,c,u,d,f,p,h,m=this,v=!1,g=function(){l=document.getElementById(e),l.classList.add("elasto-container"),o=i?i:[],w(),y(),window.addEventListener("keydown",W),window.addEventListener("keyup",M),window.addEventListener("resize",b),v=!0},w=function(){r=r||{},h=h||{};for(var e in t)t.hasOwnProperty(e)&&r.hasOwnProperty(e)?h[e]=r[e]:t.hasOwnProperty(e)&&(h[e]=t[e])},y=function(){for(;l.firstChild;)l.removeChild(l.firstChild);a=0,L(),h.hideIncompleteRow&&!v&&o.length>c&&c>0&&(o.splice(o.length-c,c),a=0,L()),d=null;for(var e=0;o.length>e;e++)E(e);o.length&&_(1)},E=function(e){var t=k();t.style.width=u+"%",t.setAttribute("data-elasto-id",e+1);for(var n in h.customAttributes)(function(n){if(h.customAttributes.hasOwnProperty(n)){var i=h.customAttributes[n].replace(/\{\{([^{}]+)\}\}/g,function(t){var n=t.replace(/\{/g,"").replace(/\}/g,"");return o[e].hasOwnProperty(n)?o[e][n]:t});if("class"===n)for(var r=i.split(" "),l=0;r.length>l;l++)t.classList.add(r[l]);else t.setAttribute(n,i)}})(n);o[e].hasOwnProperty(h.displayProperties.image)&&o[e][h.displayProperties.image]&&(t.getElementsByClassName("elasto-square-bg")[0].style.backgroundImage="url("+o[e][h.displayProperties.image]+")"),o[e].hasOwnProperty(h.displayProperties.title)&&(t.getElementsByClassName("elasto-square-title")[0].innerHTML=o[e][h.displayProperties.title],t.getElementsByClassName("elasto-square-title")[0].title=o[e][h.displayProperties.title]),o[e].hasOwnProperty(h.displayProperties.description)&&(t.getElementsByClassName("elasto-square-description")[0].innerHTML=o[e][h.displayProperties.description]),t.addEventListener("click",q),o[e].elastoId=e+1,o[e].elem=t,l.appendChild(t),d||(d=Math.floor(t.clientWidth)),t.style.height=d+"px"},k=function(){var e=document.createElement("div");e.classList.add("elasto-square");var t=document.createElement("div");t.classList.add("elasto-square-bg");var n=document.createElement("div");n.classList.add("elasto-square-wrap");var i=document.createElement("div");i.classList.add("elasto-square-title");var r=document.createElement("div");return r.classList.add("elasto-square-description"),e.appendChild(t),e.appendChild(n),n.appendChild(i),n.appendChild(r),e.cloneNode(!0)},L=function(){var e=Math.floor(l.clientWidth),t=Math.floor(e/h.minSize);t=0===t?1:t,t!==a&&(a=t,s=Math.floor(o.length/a),c=o.length%a,u=100/a)},b=function(){p&&clearTimeout(p),p=setTimeout(P,50)},P=function(){if(o.length){var e=u.valueOf();if(L(),e!==u){o[0].elem.style.width=u+"%",d=Math.floor(o[0].elem.clientWidth);for(var t=0;o.length>t;t++)o[t].elem.style.width=u+"%",o[t].elem.style.height=d+"px"}else{d=Math.floor(o[0].elem.clientWidth);for(var n=0;o.length>n;n++)o[n].elem.style.height=d+"px"}}},_=function(e){for(var t=l.getElementsByClassName("active"),n=0;t.length>n;n++)t[n].classList.remove("active");f=e,o[e-1].elem.classList.add("active")},I=function(){return o[f-1]},A=function(){if(o.length){for(var e,t=l;t&&(e=window.getComputedStyle(t).getPropertyValue("overflow"),"visible"===e);)t=t.parentElement;var n,i,r,s,a,c,u,f,p=50;t?"hidden"!==e&&(r=T(I().elem).top,s=T(I().elem).left,a=t.scrollTop,c=a+t.clientHeight,u=t.scrollLeft,f=u+t.clientWidth,i=a,n=u,r+d+p>c?i=r+d+p-t.clientHeight:a>r-p&&(i=r-p),s+d+p>f?n=s+d+p-t.clientWidth:u>s-p&&(n=s-p),h.trackAnimation?O(t,{top:i,left:n},200):(t.scrollTop=i,t.scrollLeft=n)):(r=C(I().elem).top,s=C(I().elem).left,a=(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0),c=a+window.innerHeight,u=(window.pageXOffset||document.documentElement.scrollLeft)-(document.documentElement.clientLeft||0),f=u+window.innerWidth,i=a,n=u,r+d+p>c?i=r+d+p-window.innerHeight:a>r-p&&(i=r-p),s+d+p>f?n=s+d+p-window.innerWidth:u>s-p&&(n=s-p),h.trackAnimation?O(document.body,{top:i,left:n},200):window.scrollTo(n,i))}},C=function(e){for(var t=0,n=0;e;)t+=parseInt(e.offsetTop,10),n+=parseInt(e.offsetLeft,10),e=e.offsetParent;return{top:t,left:n}},T=function(e){var t,n={top:parseInt(e.offsetTop,10),left:parseInt(e.offsetLeft,10)},i={top:parseInt(e.parentElement.offsetTop,10),left:parseInt(e.parentElement.offsetLeft,10)},r=window.getComputedStyle(e.parentElement).getPropertyValue("position");return t="relative"===r||"absolute"===r?n:{top:n.top-i.top,left:n.left-i.left}},O=function(e,t,i){var r=e.scrollTop,o=e.scrollLeft,l=t.top-r,s=t.left-o,a=0,c=20,u=function(){a+=c;var t=n.Easing.InOutQuad(a,r,l,i),d=n.Easing.InOutQuad(a,o,s,i);e.scrollTop=t,e.scrollLeft=d,i>a&&setTimeout(u,c)};u()},q=function(e){var t=parseInt(e.target.getAttribute("data-elasto-id"),10);if(t||(t=parseInt(e.target.parentElement.getAttribute("data-elasto-id"),10)),t){var n=f;_(t),e.preventDefault(),h.trackActive&&A(),h.click&&h.click(I()),h.move&&n!==t&&h.move(I()),h.select&&h.select(I())}},M=function(e){if(o.length&&h.keyEventsEnabled){var t=e.which||e.keycode;13===t&&(e.preventDefault(),h.enter&&h.enter(I()),h.select&&h.select(I()))}},W=function(e){if(o.length&&h.keyEventsEnabled){var t=e.which||e.keycode,n=!0;switch(t){case 38:G();break;case 40:N();break;case 37:H();break;case 39:B();break;default:n=!1}n&&(e.preventDefault(),h.trackActive&&A(),h.move&&h.move(I()))}},B=function(){var e;e=f?0===f%a?f-a+1:f===o.length?f-c+1:f+1:1,_(e)},H=function(){var e;f?0===(f-1)%a?(e=f+a-1,e>o.length&&(e=o.length)):e=f-1:e=1,_(e)},N=function(){var e;e=f?f>o.length-c?f-s*a:f+a>o.length?f-(s-1)*a:f+a:1,_(e)},G=function(){var e;f?a>=f?(e=f+s*a,e>o.length&&(e-=a)):e=f-a:e=1,_(e)};return this.resize=function(){return P(),m},this.reload=function(e){return e&&(o=e),v=!1,y(),m},this.empty=function(){return this.reload([]),m},this.add=function(e){return o.push(e),a=0,L(),E(o.length-1),1===o.length&&_(1),m},this.remove=function(e){e=parseInt(e,10);for(var t=0;o.length>t;t++)t===e-1&&o.splice(t,1);return y(),m},this.select=function(e){return e=parseInt(e,10),o.length>=e&&(_(e),h.trackActive&&A(),h.move&&h.move(I()),h.select&&h.select(I())),m},this.moveTo=function(e){return e=parseInt(e,10),o.length>=e&&(_(e),h.trackActive&&A(),h.move&&h.move(I())),m},this.__defineGetter__("active",function(){return I()}),this.__defineGetter__("data",function(){return o}),this.__defineGetter__("count",function(){return o.length}),this.__defineGetter__("options",function(){return h}),this.__defineGetter__("columnCount",function(){return a}),g(),this}}function t(e){"use strict";var t=e.Elasto,n=t.Easing=function(){return this};n.InOutQuad=function(e,t,n,i){return e/=i/2,1>e?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)}}function n(e){"use strict";e.jQuery&&($.fn.elasto=function(t,n){return 1===this.length?new e.Elasto($(this).attr("id"),t,n):this})}var i=Function;new i("return this")();var r=function(i){return e(i),t(i),n(i),i.Elasto};"function"==typeof define&&define.amd?define(function(){return r({})}):r(this)})(this);